'use strict';var p=require('react'),modal=require('@nextui-org/modal'),framerMotion=require('framer-motion'),button=require('@nextui-org/button'),tabs=require('@nextui-org/tabs'),lucideReact=require('lucide-react'),bs=require('react-icons/bs'),input=require('@nextui-org/input'),select=require('@nextui-org/select'),dropdown=require('@nextui-org/dropdown'),date=require('@internationalized/date'),datePicker=require('@nextui-org/date-picker'),dateInput=require('@nextui-org/date-input'),reactHookForm=require('react-hook-form'),zod$1=require('@hookform/resolvers/zod'),zod=require('zod'),uuid=require('uuid'),chip=require('@nextui-org/chip'),card=require('@nextui-org/card'),Te=require('clsx');function _interopDefault(e){return e&&e.__esModule?e:{default:e}}var p__default=/*#__PURE__*/_interopDefault(p);var Te__default=/*#__PURE__*/_interopDefault(Te);var ue=p.createContext(void 0),ce=({children:e})=>{let[o,m]=p.useState(null),[a,y]=p.useState(null),{isOpen:l,onOpen:f,onClose:u}=modal.useDisclosure(),s=async({title:M,body:h,footer:S,modalClassName:x,getter:k})=>{if(m({title:M,body:h,footer:S,modalClassName:x}),k)try{let T=await k();y(T);}catch(T){console.error("Error fetching data:",T),y(null);}else y(null);f();};return p__default.default.createElement(ue.Provider,{value:{showModal:s,onClose:u,data:a}},e,p__default.default.createElement(modal.Modal,{backdrop:"blur",classNames:{backdrop:"max-h-screen overflow-hidden",wrapper:"max-h-screen overflow-hidden"},isOpen:l,onOpenChange:u},p__default.default.createElement(modal.ModalContent,{className:o?.modalClassName||""},o&&p__default.default.createElement(p__default.default.Fragment,null,o.title&&p__default.default.createElement(modal.ModalHeader,null,o.title),o.body&&p__default.default.createElement(modal.ModalBody,null,o.body),o.footer&&p__default.default.createElement(modal.ModalFooter,null,o.footer)))))},P=()=>{let e=p.useContext(ue);if(!e)throw new Error("useModalContext must be used within a ModalProvider");return e};var Ue=(e,o)=>{switch(o.type){case"ADD_EVENT":return {...e,events:[...e.events,o.payload]};case"REMOVE_EVENT":return {...e,events:e.events.filter(m=>m.id!==o.payload.id)};case"UPDATE_EVENT":return {...e,events:e.events.map(m=>m.id===o.payload.id?o.payload:m)};case"SET_EVENTS":return {...e,events:o.payload};default:return e}},ve=p.createContext(void 0),je=({children:e,onAddEvent:o,onUpdateEvent:m,onDeleteEvent:a,initialState:y,weekStartsOn:l="sunday",canEdit:f=u=>!0})=>{let[u,s]=p.useReducer(Ue,{events:y??[]});p.useEffect(()=>{y&&s({type:"SET_EVENTS",payload:y});},[y]);let T={getDaysInMonth:(d,i)=>Array.from({length:new Date(i,d+1,0).getDate()},(n,r)=>({day:r+1,events:[]})),getEventsForDay:(d,i)=>u?.events.filter(n=>{let r=new Date(n.startDate),v=new Date(n.endDate),c=new Date(i);c.setDate(d),c.setHours(0,0,0,0);let D=new Date(i);D.setDate(d+1),D.setHours(0,0,0,0);let N=r.getDate()===d&&r.getMonth()===i.getMonth()&&r.getFullYear()===i.getFullYear(),t=r<D&&v>=c;return N||t}),getDaysInWeek:(d,i)=>{let n=l==="sunday"?0:1,r=new Date(i,0,1),v=r.getDay(),c=new Date(r);c.setDate(r.getDate()+(d-1)*7+(n-v+7)%7);let D=[];for(let N=0;N<7;N++){let t=new Date(c);t.setDate(t.getDate()+N),D.push(t);}return D},getWeekNumber:d=>{let i=new Date(Date.UTC(d.getFullYear(),d.getMonth(),d.getDate()));i.setUTCDate(i.getUTCDate()+4-(i.getUTCDay()||7));let n=new Date(Date.UTC(i.getUTCFullYear(),0,1));return Math.ceil(((i.getTime()-n.getTime())/864e5+1)/7)},getDayName:d=>["Dom","Seg","Ter","Qua","Qui","Sex","S\xE1b"][d]};function A(d,i){let n=i.filter(t=>t.startDate<d.endDate&&t.endDate>d.startDate),r=n.length||1,v=n.indexOf(d),c=0,D=0,N=0;if(d.startDate instanceof Date&&d.endDate instanceof Date){let t=d.startDate.getHours()*60+d.startDate.getMinutes();c=(d.endDate.getHours()*60+d.endDate.getMinutes()-t)/60*64;let O=d.startDate.getHours()+d.startDate.getMinutes()/60;D=Math.max(0,(24-O)*64),c=Math.min(c,D),N=O*64;}else console.error("Invalid event or missing start/end dates.");return {height:`${c<10?20:c>D?D:c}px`,top:`${N}px`,zIndex:v+1,left:`${v*100/r}%`,maxWidth:`${100/r}%`,minWidth:`${100/r}%`}}function H(d){s({type:"ADD_EVENT",payload:d}),o&&o(d);}function _(d,i){s({type:"UPDATE_EVENT",payload:{...d,id:i}}),m&&m(d);}function $(d){s({type:"REMOVE_EVENT",payload:{id:d}}),a&&a(d);}let V={handleEventStyling:A,handleAddEvent:H,handleUpdateEvent:_,handleDeleteEvent:$};return p__default.default.createElement(ve.Provider,{value:{events:u,dispatch:s,getters:T,handlers:V,weekStartsOn:l,canEdit:f}},p__default.default.createElement(ce,null,e))},W=()=>{let e=p.useContext(ve);if(!e)throw new Error("useScheduler must be used within a SchedulerProvider");return e};function Q(e){return `${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function fe(e){let{year:o,month:m,day:a}=e;return new Date(o,m-1,a)}function Z({data:e,setValue:o,readOnly:m=!1}){let[a,y]=p.useState({startDate:e?date.parseDate(Q(e?.startDate)):date.parseDate("2024-04-06"),endDate:e?date.parseDate(Q(e?.endDate)):date.parseDate("2024-04-10"),startTime:new date.Time(e?.startDate?.getHours()||0,e?.startDate?.getMinutes()||0),endTime:new date.Time(e?.endDate?.getHours()||0,e?.endDate?.getMinutes()||0)});return p.useEffect(()=>{if(!a)return;let l=fe(a.startDate),f=fe(a.endDate);l.setHours(a?.startTime?.hour||0),l.setMinutes(a?.startTime?.minute||0),f.setHours(a?.endTime?.hour||0),f.setMinutes(a?.endTime?.minute||0),f<l&&f.setHours(l.getHours()+1),o("startDate",l),o("endDate",f);},[a,o]),p__default.default.createElement("div",{style:{pointerEvents:m?"none":"auto"}},p__default.default.createElement("div",{className:"w-full flex gap-4 max-w-full flex-wrap"},p__default.default.createElement(datePicker.DateRangePicker,{label:"Dura\xE7\xE3o do Evento",isRequired:!0,isReadOnly:m,value:{start:a.startDate,end:a.endDate},className:"w-full",onChange:l=>{let f=l?.start,u=l?.end,s=new Date(f?.year||0,(f?.month||1)-1,f?.day||1),M=new Date(u?.year||0,(u?.month||1)-1,u?.day||1);y({...a,startDate:date.parseDate(Q(s)),endDate:date.parseDate(Q(M))});}}),p__default.default.createElement("div",{className:"flex flex-wrap gap-4"},p__default.default.createElement(dateInput.TimeInput,{label:"Hora de In\xEDcio",defaultValue:a?.startTime,isReadOnly:m,onChange:l=>{y({...a,startTime:l||new date.Time(0,0)});}}),p__default.default.createElement(dateInput.TimeInput,{label:"Hora de T\xE9rmino",defaultValue:a?.endTime,isReadOnly:m,onChange:l=>{y({...a,endTime:l||new date.Time(0,0)});},isInvalid:a?.startTime&&a?.endTime&&a.endTime.hour*60+a.endTime.minute<=a.startTime.hour*60+a.startTime.minute}))))}var Kt=["success","primary","default","warning","danger"],he=zod.z.object({id:zod.z.string().optional(),title:zod.z.string().nonempty("Event name is required"),description:zod.z.string().optional(),startDate:zod.z.date(),endDate:zod.z.date(),variant:zod.z.enum(["primary","danger","success","warning","default"]),color:zod.z.string().nonempty("Color selection is required"),productData:zod.z.object({product_id:zod.z.string().nonempty("Product ID is required"),product_title:zod.z.string().nonempty("Product title is required"),learning_path_title:zod.z.string().optional(),module_id:zod.z.string().nonempty("Module ID is required"),module_title:zod.z.string().nonempty("Module title is required")}).optional()});function z({CustomAddEventModal:e,productData:o}){let {onClose:m,data:a}=P(),{canEdit:y}=W(),l=!y(a?.id||""),[f,u]=p.useState(c(a?.variant||"primary")),[s,M]=p.useState(""),[h,S]=p.useState(""),[x,k]=p.useState(""),T=o?.filter(t=>t.product_id===s).map(t=>t.learning_path_title).filter((t,C,I)=>t&&I.indexOf(t)===C),A=o?.filter(t=>t.product_id===s&&(!h||t.learning_path_title===h)).map(t=>({id:t.module_id,title:t.module_title})).filter((t,C,I)=>I.findIndex(O=>O.id===t.id)===C),H=o?.map(t=>({id:t.product_id,title:t.product_title})).filter((t,C,I)=>I.findIndex(O=>O.id===t.id)===C),{handlers:$}=W(),{register:V,handleSubmit:d,reset:i,formState:{errors:n},setValue:r}=reactHookForm.useForm({resolver:zod$1.zodResolver(he),defaultValues:{id:a?.id??uuid.v4(),title:a?.title??"",description:a?.description??"",startDate:a?.startDate??new Date,endDate:a?.endDate??(()=>{let t=new Date;return t.setHours(t.getHours()+1),t})(),variant:a?.variant??"primary",color:a?.color??"blue",productData:a?.productData}});p.useEffect(()=>{a&&i({id:a.id,title:a.title,description:a.description||"",startDate:a.startDate,endDate:a.endDate,variant:a.variant||"primary",color:a.color||"blue",productData:a.productData});},[a,i]);let v=[{key:"blue",name:"Marrom"},{key:"red",name:"Vermelho"},{key:"green",name:"Verde"},{key:"yellow",name:"Amarelo"}];function c(t){switch(t){case"primary":return "blue";case"danger":return "red";case"success":return "green";case"warning":return "yellow";default:return "blue"}}function D(t){switch(t){case"blue":return "primary";case"red":return "danger";case"green":return "success";case"yellow":return "warning";default:return "default"}}return p__default.default.createElement("form",{className:"flex flex-col gap-3 max-h-[80vh] overflow-y-auto pr-2",onSubmit:d(t=>{let C=o?.find(U=>U.product_id===s&&(!h||U.learning_path_title===h)&&U.module_id===x),O={id:a?.id??uuid.v4(),title:t.title,startDate:t.startDate,endDate:t.endDate,variant:t.variant,description:t.description||"",productData:C?{product_id:C.product_id,product_title:C.product_title,learning_path_title:C.learning_path_title,module_id:C.module_id,module_title:C.module_title}:void 0};a?.id?$.handleUpdateEvent(O,a?.id):$.handleAddEvent(O),m();})},e?e({register:V,errors:n}):p__default.default.createElement(p__default.default.Fragment,null,l?p__default.default.createElement(p__default.default.Fragment,null):p__default.default.createElement(input.Input,{...V("title"),label:"Nome do Evento",placeholder:"Digite o nome do evento",variant:"flat",isReadOnly:l,isInvalid:!!n.title,errorMessage:n.title?.message}),l?p__default.default.createElement("div",{className:"w-full min-h-fit overflow-y-auto p-3 rounded-medium bg-default-100",dangerouslySetInnerHTML:{__html:a?.description||""}}):p__default.default.createElement(input.Textarea,{...V("description"),label:"Descri\xE7\xE3o do Evento",placeholder:"Digite a descri\xE7\xE3o do evento",variant:"flat"}),p__default.default.createElement(Z,{data:a,setValue:r,readOnly:l}),H&&H.length>0&&p__default.default.createElement("div",{className:"flex flex-col gap-3"},l?s?p__default.default.createElement("div",{className:"flex flex-col gap-1"},p__default.default.createElement("span",{className:"text-sm text-default-700"},"Conte\xFAdo"),p__default.default.createElement("div",{className:"w-full p-3 rounded-medium bg-default-100"},H?.find(t=>t.id===s)?.title||"")):null:p__default.default.createElement(select.Select,{label:"Conte\xFAdo",placeholder:"Selecione um conte\xFAdo",value:s,variant:"flat",onChange:t=>{M(t.target.value),S(""),k("");}},(H||[]).map(t=>p__default.default.createElement(select.SelectItem,{key:t.id,value:t.id},t.title))),T&&T.length>0&&(l?p__default.default.createElement("div",{className:"flex flex-col gap-1"},p__default.default.createElement("span",{className:"text-sm text-default-700"},"Trilha"),p__default.default.createElement("div",{className:"w-full p-3 rounded-medium bg-default-100"},h||"")):p__default.default.createElement(select.Select,{label:"Trilha",placeholder:"Selecione uma trilha (opcional)",value:h,variant:"flat",onChange:t=>{S(t.target.value),k("");}},T.map(t=>p__default.default.createElement(select.SelectItem,{key:t,value:t},t)))),A&&A.length>0&&(l?p__default.default.createElement("div",{className:"flex flex-col gap-1"},p__default.default.createElement("span",{className:"text-sm text-default-700"},"M\xF3dulo"),p__default.default.createElement("div",{className:"w-full p-3 rounded-medium bg-default-100"},A.find(t=>t.id===x)?.title||"")):p__default.default.createElement(select.Select,{label:"M\xF3dulo",placeholder:"Selecione um m\xF3dulo",value:x,variant:"flat",onChange:t=>k(t.target.value)},A.map(t=>p__default.default.createElement(select.SelectItem,{key:t.id,value:t.id},t.title))))),!l&&p__default.default.createElement(dropdown.Dropdown,{backdrop:"blur"},p__default.default.createElement(dropdown.DropdownTrigger,null,p__default.default.createElement(button.Button,{variant:"flat",className:"justify-between w-fit my-4",color:D(f)},v.find(t=>t.key===f)?.name)),p__default.default.createElement(dropdown.DropdownMenu,{"aria-label":"Color selection",variant:"flat",selectionMode:"single",selectedKeys:[f],onSelectionChange:t=>{let C=t.currentKey||"blue";u(C),i(I=>({...I,variant:D(C)}));}},v.map(t=>p__default.default.createElement(dropdown.DropdownItem,{key:t.key,startContent:p__default.default.createElement("div",{className:`w-4 h-4 rounded-full bg-${t.key}-500`})},t.name)))),l&&p__default.default.createElement(modal.ModalFooter,{className:"px-0"},p__default.default.createElement(button.Button,{color:"primary",variant:"flat",onPress:m},"Fechar")),!l&&p__default.default.createElement(modal.ModalFooter,{className:"px-0"},p__default.default.createElement(button.Button,{color:"danger",variant:"light",onPress:m},"Cancelar"),p__default.default.createElement(button.Button,{color:"primary",type:"submit"},"Salvar Evento"))))}var Ee=e=>e.toLocaleString("pt-BR",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0});function Y({event:e,CustomEventModal:o,canEdit:m}){let{showModal:a}=P(),{handlers:y}=W();function l(u){a({title:u?.title,body:p__default.default.createElement(z,{CustomAddEventModal:o?.CustomAddEventModal?.CustomForm,productData:o?.CustomAddEventModal?.ProductData}),getter:async()=>({...u})});}let f=u=>u?.replace(/<[^>]*>/g,"");return p__default.default.createElement(framerMotion.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2,ease:"easeInOut"},key:e?.id,className:"w-full relative use-automation-zoom-in cursor-pointer border border-default-400/60 rounded-lg  flex flex-col flex-grow "},m&&p__default.default.createElement(chip.Chip,{onClickCapture:u=>{u.stopPropagation(),y.handleDeleteEvent(e?.id);},color:"danger",variant:"solid",classNames:{content:"max-w-fit min-w-0 p-1"},className:"absolute z-50 right-0 top-[-5px]"},p__default.default.createElement(lucideReact.TrashIcon,{size:12})),e.CustomEventComponent?p__default.default.createElement("div",{onClickCapture:u=>{u.stopPropagation(),l({id:e?.id,title:e?.title,startDate:e?.startDate,endDate:e?.endDate,description:e?.description,variant:e?.variant});}},p__default.default.createElement(e.CustomEventComponent,{...e})):p__default.default.createElement(chip.Chip,{onClickCapture:u=>{u.stopPropagation(),l({id:e?.id,title:e?.title,startDate:e?.startDate,endDate:e?.endDate,description:e?.description,variant:e?.variant});},variant:"flat",color:e?.variant,classNames:{content:"p-0"},className:`min-w-full items-start p-0 flex-grow flex-col flex ${e?.minmized?"h-full":"min-h-fit p-1"} rounded-md`},p__default.default.createElement("div",{className:`flex ${e?.minmized?"p-0":"p-1"} flex-col flex-grow px-1 rounded-md  items-start w-full`},p__default.default.createElement("h1",{className:`${e?.minmized&&"text-[0.7rem] p-0 px-1"} font-semibold line-clamp-1 break-all whitespace-pre-wrap`},f(e?.title)),p__default.default.createElement("p",{className:"text-[0.65rem] break-all whitespace-pre-wrap line-clamp-3"},f(e?.description||"")),!e?.minmized&&p__default.default.createElement("div",{className:"flex justify-between w-full"},p__default.default.createElement("p",{className:"text-sm"},Ee(e?.startDate)),p__default.default.createElement("p",{className:"text-sm"},"-"),p__default.default.createElement("p",{className:"text-sm"},Ee(e?.endDate))))))}var mt=Array.from({length:24},(e,o)=>`${o.toString().padStart(2,"0")}:00`),ut={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},ct={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}}};function te({prevButton:e,nextButton:o,CustomEventComponent:m,CustomEventModal:a,classNames:y}){let l=p.useRef(null),[f,u]=p.useState(null),[s,M]=p.useState(0),[h,S]=p.useState(new Date),{showModal:x}=P(),{getters:k,handlers:T}=W(),A=n=>{if(!l.current)return;let r=l.current.getBoundingClientRect(),v=n.clientY-r.top,c=r.height/24,D=Math.max(0,Math.min(23,Math.floor(v/c))),N=v%c/c,t=Math.floor(N*60);u(`${D.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`),M(v);},H=()=>h.toLocaleDateString("pt-BR",{weekday:"short",day:"numeric",month:"short",year:"numeric"}),_=k.getEventsForDay(h?.getDate()||0,h);function $(n){x({title:a?.CustomAddEventModal?.title||"Adicionar Evento",body:p__default.default.createElement(z,{CustomAddEventModal:a?.CustomAddEventModal?.CustomForm,productData:a?.CustomAddEventModal?.ProductData}),getter:async()=>{let r=n?.startDate||new Date,v=n?.endDate||new Date;return {startDate:r,endDate:v}}});}function V(n){if(!n){console.error("Detailed hour not provided.");return}let[r,v]=n.split(":").map(Number),c=h.getDate();if(c<1||c>31){console.error("Invalid day selected:",c);return}let D=new Date(h.getFullYear(),h.getMonth(),c,r,v);$({startDate:D,endDate:new Date(D.getTime()+60*60*1e3),title:"",id:"",variant:"primary"});}let d=()=>{let n=new Date(h);n.setDate(h.getDate()+1),S(n);},i=()=>{let n=new Date(h);n.setDate(h.getDate()-1),S(n);};return p__default.default.createElement("div",{className:""},p__default.default.createElement("div",{className:"flex justify-between gap-3 flex-wrap mb-5"},p__default.default.createElement("h1",{className:"text-3xl font-semibold mb-4"},H()),p__default.default.createElement("div",{className:"flex ml-auto  gap-3"},e?p__default.default.createElement("div",{onClick:i},e):p__default.default.createElement(button.Button,{className:y?.prev,startContent:p__default.default.createElement(lucideReact.ArrowLeft,null),onClick:i},"Anterior"),o?p__default.default.createElement("div",{onClick:d},o):p__default.default.createElement(button.Button,{className:y?.next,onClick:d,endContent:p__default.default.createElement(lucideReact.ArrowRight,null)},"Pr\xF3ximo"))),p__default.default.createElement("div",{className:"flex flex-col gap-4"},p__default.default.createElement("div",{className:"all-day-events"},p__default.default.createElement(framerMotion.AnimatePresence,{mode:"wait"},_&&_?.length?_?.map((n,r)=>p__default.default.createElement("div",{key:`event-${n.id}-${r}`,className:"mb-2"},p__default.default.createElement(Y,{event:{...n,CustomEventComponent:m,minmized:!1},CustomEventModal:a}))):"Nenhum evento para hoje")),p__default.default.createElement("div",{className:"relative rounded-md bg-default-50 hover:bg-default-100 transition duration-400"},p__default.default.createElement(framerMotion.motion.div,{className:"relative rounded-xl flex ease-in-out",ref:l,variants:ut,initial:"hidden",animate:"visible",onMouseMove:A,onMouseLeave:()=>u(null)},p__default.default.createElement("div",{className:"flex  flex-col"},mt.map((n,r)=>p__default.default.createElement(framerMotion.motion.div,{key:`hour-${r}`,variants:ct,className:"cursor-pointer   transition duration-300  p-4 h-[64px] text-left text-sm text-muted-foreground border-default-200"},n))),p__default.default.createElement("div",{className:"flex relative flex-grow flex-col "},Array.from({length:24}).map((n,r)=>p__default.default.createElement("div",{onClick:()=>{V(f);},key:`hour-${r}`,className:"cursor-pointer w-full relative border-b  hover:bg-default-200/50  transition duration-300  p-4 h-[64px] text-left text-sm text-muted-foreground border-default-200"},p__default.default.createElement("div",{className:"absolute bg-default-200 flex items-center justify-center text-xs opacity-0 transition left-0 top-0 duration-250 hover:opacity-100 w-full h-full"},"Adicionar Evento"))),p__default.default.createElement(framerMotion.AnimatePresence,{mode:"wait"},_&&_?.length?_?.map((n,r)=>{let{height:v,left:c,maxWidth:D,minWidth:N,top:t,zIndex:C}=T.handleEventStyling(n,_);return p__default.default.createElement("div",{key:`event-${n.id}-${r}`,style:{minHeight:v,top:t,left:c,maxWidth:D,minWidth:N},className:"flex transition-all duration-1000 flex-grow flex-col z-50 absolute"},p__default.default.createElement(Y,{event:{...n,CustomEventComponent:m,minmized:!0},CustomEventModal:a}))}):""))),f&&p__default.default.createElement("div",{className:"absolute left-[50px] w-[calc(100%-53px)] h-[3px]  bg-primary-300 dark:bg-primary/30 rounded-full pointer-events-none",style:{top:`${s}px`}},p__default.default.createElement(chip.Chip,{color:"success",variant:"flat",className:"absolute vertical-abs-center z-50 left-[-55px] text-xs uppercase"},f)))))}function ne(){let{data:e}=P(),o=e?.dayEvents||[];return p__default.default.createElement("div",{className:"flex flex-col gap-2"},o.map(m=>p__default.default.createElement(Y,{key:m.id,event:{...m}})))}function ae({prevButton:e,nextButton:o,CustomEventComponent:m,CustomEventModal:a,classNames:y}){let{getters:l,weekStartsOn:f}=W(),{showModal:u}=P(),[s,M]=p.useState(new Date),h=l.getDaysInMonth(s.getMonth(),s.getFullYear()),S=()=>{let n=new Date(s.getFullYear(),s.getMonth()-1,1);M(n);},x=()=>{let n=new Date(s.getFullYear(),s.getMonth()+1,1);M(n);};function k(n){u({title:"Adicionar Evento",body:p__default.default.createElement(z,null),getter:async()=>{let r=new Date(s.getFullYear(),s.getMonth(),n??1,0,0,0,0),v=new Date(s.getFullYear(),s.getMonth(),n??1,23,59,59,999);return {startDate:r,endDate:v}}});}function T(n){u({title:n?.[0]?.startDate.toLocaleDateString("pt-BR",{weekday:"short",day:"numeric",month:"short",year:"numeric"}),body:p__default.default.createElement(ne,null),getter:async()=>({dayEvents:n})});}let A={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.02}}},H={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}}},_=f==="monday"?["Seg","Ter","Qua","Qui","Sex","S\xE1b","Dom"]:["Dom","Seg","Ter","Qua","Qui","Sex","S\xE1b"],V=(new Date(s.getFullYear(),s.getMonth(),1).getDay()-(f==="monday"?1:0)+7)%7,d=new Date(s.getFullYear(),s.getMonth()-1,1),i=new Date(d.getFullYear(),d.getMonth()+1,0).getDate();return p__default.default.createElement("div",null,p__default.default.createElement("div",{className:"flex flex-col mb-4"},p__default.default.createElement(framerMotion.motion.h2,{key:s.getMonth(),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1},className:"text-lg my-5 tracking-tighter font-bold"},s.toLocaleString("default",{month:"long"})," ",s.getFullYear()),p__default.default.createElement("div",{className:"flex gap-3"},e?p__default.default.createElement("div",{onClick:S},e):p__default.default.createElement(button.Button,{className:y?.prev,startContent:p__default.default.createElement(lucideReact.ArrowLeft,null),onClick:S},"Anterior"),o?p__default.default.createElement("div",{onClick:x},o):p__default.default.createElement(button.Button,{className:y?.next,onClick:x,endContent:p__default.default.createElement(lucideReact.ArrowRight,null)},"Pr\xF3ximo"))),p__default.default.createElement(framerMotion.AnimatePresence,{mode:"wait"},p__default.default.createElement(framerMotion.motion.div,{variants:A,initial:"hidden",animate:"visible",key:s.getMonth(),className:"grid grid-cols-7 gap-1 sm:gap-2"},_.map((n,r)=>p__default.default.createElement("div",{key:r,className:"text-left my-8 text-2xl tracking-tighter font-medium"},n)),Array.from({length:V}).map((n,r)=>p__default.default.createElement("div",{key:`offset-${r}`,className:"h-[150px] opacity-50"},p__default.default.createElement("div",{className:Te__default.default("font-semibold relative text-lg mb-1")},i-V+r+1))),h.map(n=>{let r=l.getEventsForDay(n.day,s);return p__default.default.createElement(framerMotion.motion.div,{className:"hover:z-50 border-none h-[150px] rounded group flex flex-col",key:n.day,variants:H},p__default.default.createElement(card.Card,{isPressable:!0,className:"shadow-md  relative flex p-4 border border-default-100 h-full",onClick:()=>k(n.day)},p__default.default.createElement("div",{className:Te__default.default("font-semibold relative text-lg mb-1",r.length>0?"text-primary-600":"text-muted-foreground",new Date().getDate()===n.day&&new Date().getMonth()===s.getMonth()&&new Date().getFullYear()===s.getFullYear()?"text-secondary-500":"")},n.day),p__default.default.createElement("div",{className:"flex-grow flex flex-col gap-2 w-full overflow-hidden"},p__default.default.createElement(framerMotion.AnimatePresence,{mode:"wait"},r?.length>0&&p__default.default.createElement(Y,{event:{...r[0],CustomEventComponent:m,minmized:!0},CustomEventModal:a})),r.length>1&&p__default.default.createElement(chip.Chip,{onClick:v=>{v.stopPropagation(),T(r);},variant:"flat",className:"hover:bg-default-200 absolute right-2 text-xs top-2 transition duration-300"},r.length>1?`+${r.length-1}`:" ")),r.length===0&&p__default.default.createElement("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300"},p__default.default.createElement("span",{className:"text-white tracking-tighter text-lg font-semibold"},"Adicionar Evento"))))}))))}var Mt=Array.from({length:24},(e,o)=>`${o.toString().padStart(2,"0")}:00`);var Nt={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}};function ie({prevButton:e,nextButton:o,CustomEventComponent:m,CustomEventModal:a,classNames:y}){let{getters:l,handlers:f}=W(),u=p.useRef(null),[s,M]=p.useState(null),[h,S]=p.useState(0),[x,k]=p.useState(new Date),{showModal:T}=P(),A=l?.getDaysInWeek(l?.getWeekNumber(x),x.getFullYear()),H=i=>{if(!u.current)return;let n=u.current.getBoundingClientRect(),r=i.clientY-n.top,v=n.height/24,c=Math.max(0,Math.min(23,Math.floor(r/v))),D=r%v/v,N=Math.floor(D*60);M(`${c.toString().padStart(2,"0")}:${N.toString().padStart(2,"0")}`),S(r+83);};function _(i){T({title:"Adicionar Evento",body:p__default.default.createElement(z,null),getter:async()=>{let n=i?.startDate||new Date,r=i?.endDate||new Date;return {startDate:n,endDate:r}}});}let $=()=>{let i=new Date(x);i.setDate(x.getDate()+7),k(i);},V=()=>{let i=new Date(x);i.setDate(x.getDate()-7),k(i);};function d(i,n){if(!n){console.error("Detailed hour not provided.");return}let[r,v]=n.split(":").map(Number),c=A[i%7].getDate();if(c<1||c>31){console.error("Invalid day selected:",c);return}let D=new Date(x.getFullYear(),x.getMonth(),c,r,v);_({startDate:D,endDate:new Date(D.getTime()+60*60*1e3),title:"",id:"",variant:"primary"});}return p__default.default.createElement("div",{className:"flex flex-col gap-4"},p__default.default.createElement(framerMotion.motion.div,{key:x.toDateString()+"parent",className:"all-week-events flex flex-col gap-2",variants:Nt,initial:"hidden",animate:"visible"}),p__default.default.createElement("div",{className:"flex ml-auto gap-3"},e?p__default.default.createElement("div",{onClick:V},e):p__default.default.createElement(button.Button,{className:y?.prev,startContent:p__default.default.createElement(lucideReact.ArrowLeft,null),onClick:V},"Anterior"),o?p__default.default.createElement("div",{onClick:$},o):p__default.default.createElement(button.Button,{className:y?.next,onClick:$,endContent:p__default.default.createElement(lucideReact.ArrowRight,null)},"Pr\xF3ximo")),p__default.default.createElement("div",{key:x.toDateString(),className:"grid use-automation-zoom-in grid-cols-8 gap-0"},p__default.default.createElement("div",{className:"sticky top-0 left-0 z-30 bg-default-100 rounded-tl-lg h-full border-0  flex items-center justify-center"},p__default.default.createElement("span",{className:"text-lg font-semibold text-muted-foreground px-4"},"Semana ",l.getWeekNumber(x))),p__default.default.createElement("div",{className:"col-span-7 flex flex-col relative"},p__default.default.createElement("div",{className:"grid grid-cols-7 gap-0 flex-grow"},A.map((i,n)=>p__default.default.createElement("div",{key:n,className:"relative flex flex-col"},p__default.default.createElement("div",{className:"sticky bg-default-100 top-0 z-20 flex-grow flex items-center justify-center"},p__default.default.createElement("div",{className:"text-center p-4"},p__default.default.createElement("div",{className:"text-lg font-semibold"},l.getDayName(i.getDay())),p__default.default.createElement("div",{className:Te__default.default("text-lg font-semibold",new Date().getDate()===i.getDate()&&new Date().getMonth()===x.getMonth()&&new Date().getFullYear()===x.getFullYear()?"text-secondary-500":"")},i.getDate()))),p__default.default.createElement("div",{className:"absolute top-12 right-0 w-px h-[calc(100%-3rem)]"})))),s&&p__default.default.createElement("div",{className:"absolute flex z-10 left-0 w-full h-[3px] bg-primary-300 dark:bg-primary/30 rounded-full pointer-events-none",style:{top:`${h}px`}},p__default.default.createElement(chip.Chip,{color:"success",variant:"flat",className:"absolute vertical-abs-center z-50 left-[-55px] text-xs uppercase"},s))),p__default.default.createElement("div",{ref:u,onMouseMove:H,onMouseLeave:()=>M(null),className:"relative grid grid-cols-8 col-span-8"},p__default.default.createElement("div",{className:"col-span-1 bg-default-50 hover:bg-default-100 transition duration-400"},Mt.map((i,n)=>p__default.default.createElement("div",{key:`hour-${n}`,className:"cursor-pointer border-b border-default-200 p-[16px] h-[64px] text-center text-sm text-muted-foreground border-r"},i))),p__default.default.createElement("div",{className:"col-span-7 bg-default-50 grid h-full grid-cols-7"},Array.from({length:7},(i,n)=>{let r=l.getEventsForDay(A[n%7].getDate(),x);return p__default.default.createElement("div",{key:`day-${n}`,className:"col-span-1  border-default-200 z-20 relative transition duration-300 cursor-pointer border-r border-b text-center text-sm text-muted-foreground",onClick:()=>{d(n,s);}},p__default.default.createElement(framerMotion.AnimatePresence,{mode:"wait"},r?.map((v,c)=>{let{height:D,left:N,maxWidth:t,minWidth:C,top:I,zIndex:O}=f.handleEventStyling(v,r);return p__default.default.createElement("div",{key:`event-${v.id}-${c}`,style:{minHeight:D,height:D,top:I,left:N,maxWidth:t,minWidth:C},className:"flex transitio transition-all duration-1000 flex-grow flex-col z-50 absolute"},p__default.default.createElement(Y,{event:{...v,CustomEventComponent:m,minmized:!0},CustomEventModal:a}))})),Array.from({length:24},(v,c)=>p__default.default.createElement("div",{key:`day-${n}-hour-${c}`,className:"col-span-1 border-default-200 h-16 z-20 relative transition duration-300 cursor-pointer border-r border-b text-center text-sm text-muted-foreground"},p__default.default.createElement("div",{className:"absolute bg-default-100 flex items-center justify-center text-xs opacity-0 transition duration-250 hover:opacity-100 w-full h-full"},"Adicionar Evento"))))})))))}var de={initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,type:"spring",stiffness:250}};function _e({views:e={views:["day","week","month"],mobileViews:["day"]},CustomComponents:o,classNames:m}){let{showModal:a}=P(),[y,l]=p__default.default.useState(!1);p.useEffect(()=>{l(!0);},[]);let[f,u]=p__default.default.useState(y?window.innerWidth<=768:!1);p.useEffect(()=>{if(!y)return;u(window.innerWidth<=768);function h(){window&&window.innerWidth<=768?u(!0):u(!1);}return window&&window.addEventListener("resize",h),()=>window&&window.removeEventListener("resize",h)},[y]);function s(h){a({title:o?.CustomEventModal?.CustomAddEventModal?.title||"Adicionar Evento",body:p__default.default.createElement(z,{CustomAddEventModal:o?.CustomEventModal?.CustomAddEventModal?.CustomForm,productData:o?.CustomEventModal?.CustomAddEventModal?.ProductData}),getter:async()=>{let S=new Date(new Date().getFullYear(),new Date().getMonth(),new Date().getDate(),0,0,0,0),x=new Date(new Date().getFullYear(),new Date().getMonth(),new Date().getDate(),23,59,59,999);return {startDate:S,endDate:x}}});}let M=f?e?.mobileViews:e?.views;return p__default.default.createElement("div",{className:"flex w-full flex-col"},p__default.default.createElement("div",{className:"flex w-full"},p__default.default.createElement("div",{className:"dayly-weekly-monthly-selection relative w-full"},p__default.default.createElement(tabs.Tabs,{classNames:{...m?.tabs},"aria-label":"Options",color:"primary",variant:"solid"},M?.includes("day")&&p__default.default.createElement(tabs.Tab,{key:"day",title:o?.customTabs?.CustomDayTab?o.customTabs.CustomDayTab:p__default.default.createElement("div",{className:"flex items-center space-x-2"},p__default.default.createElement(lucideReact.CalendarDaysIcon,{size:15}),p__default.default.createElement("span",null,"Dia"))},p__default.default.createElement(framerMotion.motion.div,{...de},p__default.default.createElement(te,{classNames:m?.buttons,prevButton:o?.customButtons?.CustomPrevButton,nextButton:o?.customButtons?.CustomNextButton,CustomEventComponent:o?.CustomEventComponent,CustomEventModal:o?.CustomEventModal}))),M?.includes("week")&&p__default.default.createElement(tabs.Tab,{key:"week",title:o?.customTabs?.CustomWeekTab?o.customTabs.CustomWeekTab:p__default.default.createElement("div",{className:"flex items-center space-x-2"},p__default.default.createElement(bs.BsCalendarWeek,null),p__default.default.createElement("span",null,"Semana"))},p__default.default.createElement(framerMotion.motion.div,{...de},p__default.default.createElement(ie,{classNames:m?.buttons,prevButton:o?.customButtons?.CustomPrevButton,nextButton:o?.customButtons?.CustomNextButton,CustomEventComponent:o?.CustomEventComponent,CustomEventModal:o?.CustomEventModal}))),M?.includes("month")&&p__default.default.createElement(tabs.Tab,{key:"month",title:o?.customTabs?.CustomMonthTab?o.customTabs.CustomMonthTab:p__default.default.createElement("div",{className:"flex items-center space-x-2"},p__default.default.createElement(bs.BsCalendarMonth,null),p__default.default.createElement("span",null,"M\xEAs"))},p__default.default.createElement(framerMotion.motion.div,{...de},p__default.default.createElement(ae,{classNames:m?.buttons,prevButton:o?.customButtons?.CustomPrevButton,nextButton:o?.customButtons?.CustomNextButton,CustomEventComponent:o?.CustomEventComponent,CustomEventModal:o?.CustomEventModal})))),o?.customButtons?.CustomAddEventButton?p__default.default.createElement("div",{onClick:()=>s(),className:"absolute top-0 right-0"},o?.customButtons.CustomAddEventButton):p__default.default.createElement(button.Button,{onClick:()=>s(),className:"absolute top-0 right-0 "+m?.buttons?.addEvent,color:"primary",startContent:p__default.default.createElement(lucideReact.Calendar,null)},"Adicionar Evento"))))}exports.SchedularView=_e;exports.SchedulerProvider=je;exports.eventSchema=he;exports.useScheduler=W;exports.variants=Kt;